name: Validate code in the merge queue

on:
  merge_group:
  pull_request:

jobs:
  validate-pr:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v3
      - name: Merge queue specific check
        run: echo "âœ… This is the merge queue check"
      - name: show context
        run:  echo "${{ github.event.merge_group.base_sha }}"
      
      - run: "git diff --name-only  --submodule=log ${{ github.base_ref || github.event.merge_group.base_sha }} -- .github/** || true" 
      
      - name: Should Fail
        run: ${{ github.event_name == 'pull_request' }}
