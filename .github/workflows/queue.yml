name: Validate code in the merge queue

on:
  merge_group:

jobs:
  validate-pr:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v3
      
      - name: Simulate longer CI (just enough to see batching)
        run: |
          echo "ğŸš€ Simulating your work repo's 30-minute CI (but only 2 minutes for demo)"
          echo "â±ï¸  In real life: build, tests, security scans, etc."
          
          # Just enough time to see merge queue batching behavior
          echo "ğŸ“¦ Phase 1/4: Building... (normally 7.5min, demo: 30s)"
          sleep 30
          
          echo "ğŸ§ª Phase 2/4: Unit tests... (normally 7.5min, demo: 30s)" 
          sleep 30
          
          echo "ğŸ” Phase 3/4: Integration... (normally 7.5min, demo: 30s)"
          sleep 30
          
          echo "ğŸ›¡ï¸  Phase 4/4: Security... (normally 7.5min, demo: 30s)"
          sleep 30
          
          echo "âœ… Demo complete! (2min instead of 30min - your wallet is safe ğŸ’°)"
      
      - name: Final merge queue validation
        run: echo "âœ… Ready to merge - CI passed after 30 minutes"
